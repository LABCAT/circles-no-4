(this["webpackJsonpreact-p5js-tonejs-starter-kit"]=this["webpackJsonpreact-p5js-tonejs-starter-kit"]||[]).push([[0],{17:function(t,e,i){},32:function(t,e,i){"use strict";i.r(e);var s=i(1),n=i.n(s),a=i(11),o=i.n(a),r=(i(17),i(4));window.p5=r;i(19);var d=i(12),h=i(0);function u(){return Object(h.jsxs)("svg",{id:"play-icon",className:"fade-out",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(h.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(h.jsx)("path",{d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})]})}var c=i(2),l=i(3),p=function(){function t(e,i,s,n,a){Object(c.a)(this,t),this.p=e,this.x=i,this.y=s,this.size=n,this.fill=a}return Object(l.a)(t,[{key:"draw",value:function(){this.p.strokeWeight(1),this.p.stroke("#000000"),this.p.fill(this.fill),this.p.ellipse(this.x,this.y,this.size)}},{key:"update",value:function(){this.size=this.size-this.size/16}}]),t}(),g=function(){function t(e,i,s){Object(c.a)(this,t),this.ringColours=s,this.p=e,this.x=i,this.y=0}return Object(l.a)(t,[{key:"draw",value:function(){this.p.strokeWeight(3),this.p.noFill();for(var t=0;t<this.ringColours.length;t++){var e=this.p.color(this.ringColours[t]);e.setAlpha(63),this.p.stroke(e),this.p.circle(this.x,this.y*t,this.p.width/32)}}},{key:"update",value:function(){this.y++}}]),t}(),f=function(){function t(e,i,s,n){Object(c.a)(this,t),this.p=e,this.x=i+this.p.random(-this.p.width/32,this.p.width/32),this.y=s+this.p.random(-this.p.width/32,this.p.width/32),this.strokeColour=this.p.color(this.p.random(n)),this.fillColour=this.strokeColour,this.fillColour.setAlpha(31),this.speed=3,this.ax=this.p.random(-this.speed,this.speed),this.ay=this.p.random(-this.speed,this.speed),this.gravity=.1,this.diameter=.8*this.p.dist(this.x,this.y,i,s)}return Object(l.a)(t,[{key:"update",value:function(){this.diameter=this.diameter-.15,this.x+=this.ax/2,this.y+=this.ay/2,this.x+=this.p.random(-this.speed/2,this.speed/2),this.y+=this.p.random(-this.speed/2,this.speed/2)}},{key:"ballisFinished",value:function(){if(this.diameter<0)return!0}},{key:"draw",value:function(){this.p.noStroke(),this.diameter>0&&(this.p.noFill(),this.p.stroke(this.strokeColour),this.p.ellipse(this.x,this.y,this.diameter,this.diameter),this.p.ellipse(this.x,this.y,.2*this.diameter,.2*this.diameter))}}]),t}(),b=i.p+"static/media/circles-no-4.3dee84da.ogg",m=i.p+"static/media/circles-no-4.5509e77e.mid",v=function(){var t=Object(s.useRef)(),e=function(t){t.canvas=null,t.canvasWidth=window.innerWidth,t.canvasHeight=window.innerHeight,t.audioLoaded=!1,t.song=null,t.tempo=110,t.barAsSeconds=Math.floor(60/t.tempo*4*1e5)/1e5,t.PPQ=15360,t.drumHits=[],t.metalRings=[],t.bubbles=[],t.loadMidi=function(){d.Midi.fromUrl(m).then((function(e){console.log(e);var i=e.tracks[7].notes,s=e.tracks[1].notes,n=e.tracks[4].notes;t.scheduleCueSet(i,"executeCueSet1"),t.scheduleCueSet(s,"executeCueSet2"),t.scheduleCueSet(n,"executeCueSet3"),t.audioLoaded=!0,document.getElementById("loader").classList.add("loading--complete"),document.getElementById("play-icon").classList.remove("fade-out")}))},t.preload=function(){t.song=t.loadSound(b,t.loadMidi),t.song.onended(t.logCredits)},t.scheduleCueSet=function(e,i){for(var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=-1,a=1,o=0;o<e.length;o++){var r=e[o],d=r.ticks,h=r.time;(d!==n||s)&&(r.currentCue=a,t.song.addCue(h,t[i],r),n=d,a++)}},t.backgroundColour=0,t.setup=function(){t.canvas=t.createCanvas(t.canvasWidth,t.canvasHeight),t.background(t.backgroundColour)},t.draw=function(){if(t.audioLoaded&&t.song.isPlaying()){for(var e=0;e<t.drumHits.length;e++)t.drumHits[e].update(),t.drumHits[e].draw();for(e=0;e<t.metalRings.length;e++)t.metalRings[e].update(),t.metalRings[e].draw(),t.metalRings[e].y>t.height&&t.metalRings.splice(e,1);for(e=0;e<t.bubbles.length;e++)t.bubbles[e].update(),t.bubbles[e].draw(),t.bubbles[e].ballisFinished()&&t.bubbles.splice(e,1)}},t.executeCueSet1=function(e){var i=Math.floor(1e5*e.time)/1e5;if(parseFloat(i)>=parseFloat(t.barAsSeconds)){for(;i>=t.barAsSeconds;)i-=t.barAsSeconds;i=i>0?i:0}var s=t.width/32+t.width/t.barAsSeconds*i,n=0,a=255;switch(e.midi){case 44:n=t.height/6*1,a=255;break;case 37:n=t.height/6*3,a=191;break;case 36:n=t.height/6*5,a=127}t.drumHits.push(new p(t,s,n,t.width/16,a))},t.colourPallete=["#F94144","#F65A38","#F3722C","#F68425","#F8961E","#F9AF37","#F9C74F","#C5C35E","#90BE6D","#6AB47C","#43AA8B","#4D908E"],t.executeCueSet2=function(e){if(e.currentCue%11==1&&e.currentCue>1){t.backgroundColour--,t.background(t.backgroundColour),t.bubbles=[];var s=i(30);t.colourPallete=s({count:12,luminosity:"dark"})}var n=Math.floor(1e5*e.time)/1e5,a=2*t.barAsSeconds;if(parseFloat(n)>=parseFloat(a)){for(;n>=a;)n-=a;n=n>0?n:0}var o=t.width/32*3+t.width/a*n;t.metalRings.push(new g(t,o,t.colourPallete))},t.executeCueSet3=function(e){e.currentCue%11==1&&e.currentCue<55&&(t.backgroundColour--,t.background(t.backgroundColour),t.metalRings=[]);var i=Math.floor(1e5*e.time)/1e5,s=2*t.barAsSeconds;if(parseFloat(i)>=parseFloat(s)){for(;i>=s;)i-=s;i=i>0?i:0}for(var n=t.width/32*3+t.width/s*i,a=t.random(0,t.height),o=0;o<32;o++)t.bubbles.push(new f(t,t.map(n,0,t.width,t.width,0),a,t.colourPallete))},t.mousePressed=function(){t.audioLoaded&&(t.song.isPlaying()?t.song.pause():(parseInt(t.song.currentTime())>=parseInt(t.song.buffer.duration)&&t.reset(),document.getElementById("play-icon").classList.add("fade-out"),t.canvas.addClass("fade-in"),t.song.play()))},t.creditsLogged=!1,t.logCredits=function(){!t.creditsLogged&&parseInt(t.song.currentTime())>=parseInt(t.song.buffer.duration)&&(t.creditsLogged=!0,console.log("Music By: http://labcat.nz/","\n","Animation By: https://github.com/LABCAT/"),t.song.stop())},t.reset=function(){},t.updateCanvasDimensions=function(){t.canvasWidth=window.innerWidth,t.canvasHeight=window.innerHeight,t.canvas=t.resizeCanvas(t.canvasWidth,t.canvasHeight)},window.attachEvent?window.attachEvent("onresize",(function(){t.updateCanvasDimensions()})):window.addEventListener&&window.addEventListener("resize",(function(){t.updateCanvasDimensions()}),!0)};return Object(s.useEffect)((function(){new r(e,t.current)}),[]),Object(h.jsx)("div",{ref:t,children:Object(h.jsx)(u,{})})};var w=function(){return Object(h.jsx)(v,{})};o.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.39cc6c91.chunk.js.map